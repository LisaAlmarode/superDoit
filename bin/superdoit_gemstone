
# set -x 

export projectDir="`dirname $0`/.."
gemstoneDir="$projectDir/gemstone"

if [ $# -lt 2 ] ; then
	echo "incorrect number of args $# (1 expected .topazini path)"
	exit 1
fi
scriptFile=$1
shift
topazini=$1

if [ "args[0]" = "--" ] ; then
	"don't need to preserve the -- if present"
	shift
fi

if [ "$GEMSTONE"x = "x" ] ; then
	echo "expected \$GEMSTONE to be defined"
	exit 1
fi

$GEMSTONE/bin/topaz -l \
	-I "$topazini" \
	-q \
	-S $gemstoneDir/superdoit.tpz -- $scriptFile -- $*
